> [!Info]- ì¶œì²˜ ë§í¬
> [ğŸ”— Flutter Zero to Hero.Part 4 ğŸ”—](https://medium.com/@NALSengineering/flutter-from-zero-to-hero-part-4-exploring-inheritedwidget-6161ddcb8c0a)

# Scenario
- lesson2ì—ì„œ MyHomePageì˜ ë°ì´í„°ë¥¼ ìì‹ ìœ„ì ¯ì¸ CounterWidgetì— ë„˜ê¸°ê¸° ìœ„í•´ì„œ CounterWidgetì— MyHomePageì™€ ë™ì¼í•œ ìƒì„±ìë¥¼ ì‘ì„±í•´ì•¼ í–ˆì—ˆë‹¤.
![[Passing state down.png|center|400]]
- ìì‹ ìœ„ì ¯ì— ìƒíƒœë¥¼ ë„˜ê¸°ê¸° ìœ„í•´ ë™ì¼í•œ ìƒì„±ìë¥¼ ì‘ì„±í•˜ëŠ” ê±¸ â€œPassing state downâ€ì´ë¼ê³  ë¶€ë¥¸ë‹¤.
![[Passing state down êµ¬ì¡°ë„ 1.png|center|500]]
- ì¹´ìš´í„°ë¥¼ í™”ë©´ ì •ì¤‘ì•™ì— ìœ„ì¹˜ì‹œí‚¤ëŠ” Center ìœ„ì ¯ì„ ë³„ë„ì˜ MyCenterWidgetìœ¼ë¡œ ë½‘ì•„ëƒˆë‹¤ê³  í•´ë³´ì.
- ê·¸ëŸ¬ë©´ MyHomePageì—ì„œ CounterWidgetìœ¼ë¡œ ì•„ë˜ë¡œ ì „ë‹¬ëœ ë°ì´í„°ë¥¼ ë°›ê¸° ìœ„í•´ ë˜ counterì™€ isLoading ì†ì„±ì„ ê°€ì§„ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
![[Passing state down êµ¬ì¡°ë„ 2.png|center|500]]
- ì´ë ‡ê²Œ ë˜ë©´ ë¬¸ì œ ë‘ ê°€ì§€ê°€ ë°œìƒí•œë‹¤.
    1. `MyHomePage`ì™€ `CounterWidget` ê°„ ê±°ë¦¬ê°€ ë©€ì–´ì§ˆìˆ˜ë¡ ê·¸ ì‚¬ì´ì— ì¡´ì¬í•˜ëŠ” ìœ„ì ¯ ìˆ˜ë§Œí¼ ìƒì„±ìê°€ ëŠ˜ì–´ë‚˜ê²Œ ëœë‹¤.
    2. `MyHomePage`ê°€ `setState` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤, `MyCenterWidget`ê³¼ `CounterWidget`ì´ ë§¤ë²ˆ ì´ˆê¸°í™”ëœë‹¤(reinitialized). ì´ëŠ” ì‚¬ì‹¤ìƒ `CounterWidget`ë§Œ ë‹¤ì‹œ ë¹Œë“œë˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ë™ì‘ì´ë‹¤.
- ì´ëŠ” `InheritedWidget`ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥í•˜ë‹¤.

# suepr ìƒì„±ì
- super ìƒì„±ìëŠ” **ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œ**í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.
- ì´ë¥¼ í†µí•´ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ì´ˆê¸°í™” ë¡œì§ì„ ì‹¤í–‰í•˜ê³ , ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.
- ì‚¬ìš© ì´ìœ 
    1. **ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ì´ˆê¸°í™” ë¡œì§ ì‹¤í–‰**: ë¶€ëª¨ í´ë˜ìŠ¤ì—ì„œ ì •ì˜ëœ í•„ë“œë‚˜ ë™ì‘ì„ ì˜¬ë°”ë¥´ê²Œ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ í•„ìš”í•˜ë‹¤.
    2. **ë¶€ëª¨ í´ë˜ìŠ¤ì— í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ ì „ë‹¬**: ë¶€ëª¨ í´ë˜ìŠ¤ ìƒì„±ìê°€ ìš”êµ¬í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ìì‹ í´ë˜ìŠ¤ì—ì„œ ë°›ì•„ ì „ë‹¬í•´ì•¼ í•œë‹¤.
    3. **Dartì˜ ìƒì† êµ¬ì¡°**: Dartì—ì„œ ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ë©´, ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ìƒì„±ìê°€ ë¨¼ì € í˜¸ì¶œë˜ì–´ì•¼ ê°ì²´ê°€ ì™„ì „í•˜ê²Œ ì´ˆê¸°í™”ëœë‹¤.
- ì˜ˆì œ
    ```dart
    // ë¶€ëª¨ í´ë˜ìŠ¤ ì •ì˜
    class Parent {
      final String name;
    
      Parent(this.name); // Parent í´ë˜ìŠ¤ì˜ ìƒì„±ì
    }
    
    // ìì‹ í´ë˜ìŠ¤ ì •ì˜
    class Child extends Parent {
      final int age;
    
      // Child í´ë˜ìŠ¤ ìƒì„±ìì—ì„œ ë¶€ëª¨ í´ë˜ìŠ¤ ìƒì„±ìë¥¼ í˜¸ì¶œ
      Child(String name, this.age) : super(name);
    
      void introduce() {
        print("My name is $name, and I am $age years old.");
      }
    }
    
    // ì‚¬ìš©
    void main() {
      Child child = Child("Alice", 10);
      child.introduce(); // ì¶œë ¥: My name is Alice, and I am 10 years old.
    }
    
    ```
    - `Parent` í´ë˜ìŠ¤ëŠ” `name` í•„ë“œë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ìƒì„±ìë¥¼ ê°€ì§„ë‹¤.
    - `Child` í´ë˜ìŠ¤ëŠ” `Parent`ë¥¼ ìƒì†í•˜ë©°, `super(name)`ë¥¼ í†µí•´ ë¶€ëª¨ ìƒì„±ìì— `name`ì„ ì „ë‹¬í•œë‹¤.
- ë”°ë¼ì„œ **ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ìƒì„±ìê°€ ìš”êµ¬í•˜ëŠ” í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜ëŠ” ìì‹ í´ë˜ìŠ¤ì—ì„œ `super`ë¥¼ í†µí•´ ë°˜ë“œì‹œ ì œê³µ**í•´ì•¼ í•œë‹¤.    
    - ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ìƒì„±ìê°€ ê°ì²´ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ë° í•„ìš”í•œ í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜ëŠ”, ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê¸° ìœ„í•´ ë°˜ë“œì‹œ ê°’ì´ í•„ìš”í•˜ë‹¤.
    - ë”°ë¼ì„œ ë”°ë¼ì„œ ìì‹ í´ë˜ìŠ¤ì—ì„œ ë¶€ëª¨ í´ë˜ìŠ¤ ìƒì„±ìë¥¼ í˜¸ì¶œí•  ë•Œ, í•´ë‹¹ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°˜ë“œì‹œ ì œê³µí•´ì•¼ í•œë‹¤.
- ë°˜ë©´, **ë¶€ëª¨ í´ë˜ìŠ¤ì—ì„œ ì„ íƒì ìœ¼ë¡œ ë°›ëŠ” ë§¤ê°œë³€ìˆ˜(ê¸°ë³¸ê°’ì´ ìˆê±°ë‚˜ nullableë¡œ ì •ì˜ëœ ë§¤ê°œë³€ìˆ˜)ëŠ” ìì‹ í´ë˜ìŠ¤ì—ì„œ ì œê³µí•˜ì§€ ì•Šì•„ë„ ëœë‹¤.**

# InheritedWidget
- `InheritedWidget`ì€ ìœ„ì ¯ íŠ¸ë¦¬ì˜ í•˜ìœ„[ìì‹] ìœ„ì ¯ë“¤ì—ê²Œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í• ì„í•œë‹¤.
- InheritedWidgetì„ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ê°€ ê° ìœ„ì ¯ì„ ê±°ì³ ìˆ˜ë™ìœ¼ë¡œ ì „ë‹¬ë  í•„ìš” ì—†ì´, ìì‹ ìœ„ì ¯ì´ BuildContextë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì§ì ‘ ì°¸ì¡° ë° ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
![[InheritedWidget êµ¬ì¡°.png|center|300]]
- ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `InheritedWidget`ì„ ìƒì† ë°›ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ì.    
    ```dart
    class MyInheritedWidget extends InheritedWidget {
      /* 1. **InheritedWidget í´ë˜ìŠ¤ëŠ” data provider(ì œê³µì)ë¡œì„œ,**
        counterì™€ isLoadingê³¼ ë“±, **ìì‹ ìœ„ì ¯ì—ê²Œ ì „ë‹¬í•  ë°ì´í„°ë¥¼ í¬í•¨í•´ì•¼ í•œë‹¤.** */
      final int counter;
      final bool isLoading;
      
      // 2. InheritedWidgetì„ ìƒì†ë°›ëŠ” ê²½ìš°, **ë°˜ë“œì‹œ child ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ”
      //    super ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.**
      final Widget child;
      
      // 3. ì´ë¥¼ ìœ„í•´, **InheritedWidgetì´ ì „ë‹¬í•  ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³ ,
      //    child ë§¤ê°œë³€ìˆ˜ë¥¼ ì²˜ë¦¬í•˜ëŠ” ìƒì„±ì**ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
      MyInheritedWidget({
        required this.isLoading,
        required this.counter,
        required this.child,
      }) : super(child: child);
    
      /* 4. InheritedWidgetì„ ìƒì†ë°›ëŠ” ê²½ìš°,
            **ë°˜ë“œì‹œ updateShouldNotify ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œ**í•´ì•¼ í•˜ë©°,
            ì´ ë©”ì„œë“œëŠ” **ìƒˆ ë°ì´í„°ì™€ ê¸°ì¡´ ë°ì´í„°ë¥¼ ë¹„êµ**í•´
            **ìœ„ì ¯ íŠ¸ë¦¬ì˜ ì—…ë°ì´íŠ¸ ì—¬ë¶€ë¥¼ ê²°ì •**í•œë‹¤. */
      @override
      bool updateShouldNotify(MyInheritedWidget oldWidget) {
        return false;
      }
    
      /* 5. ìì‹ ìœ„ì ¯ì´ MyInheritedWidgetì— ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ê°€ê¸° ìœ„í•´,
            **staticìœ¼ë¡œ of ë©”ì„œë“œë¥¼ ì œê³µ**í•´ì•¼ í•œë‹¤. */
      static MyInheritedWidget? of(BuildContext context) {
        /* context.dependOnInheritedWidgetOfExactType<T>ì„ í†µí•´
           íƒ€ì…ì´ Tì¸ ê°€ì¥ ê°€ê¹Œìš´ ë¶€ëª¨ ìœ„ì ¯ì„ ê°€ì ¸ì˜¨ë‹¤. */
        return context.dependOnInheritedWidgetOfExactType<MyInheritedWidget>();
      }
    }
    ```
- `MyInheritedWidget`ë¥¼ `CounterWidget`ê³¼ `MyCenterWidget`ì˜ ë¶€ëª¨ ìœ„ì ¯ìœ¼ë¡œ ë“±ë¡í•´ ì¤€ë‹¤. ê·¸ëŸ¬ë©´ ë” ì´ìƒ ì¤‘ë³µëœ ìƒì„±ìë¥¼ ìœ„ì ¯ë§ˆë‹¤ ì‘ì„±í•´ì£¼ì§€ ì•Šì•„ë„ ëœë‹¤.
    ```dart
    ...
    class MyHomePageState extends State<MyHomePage> {
      ...  
      @override
      Widget build(BuildContext context) {
        return Scaffold(
          body: MyInheritedWidget( // NEW
            isLoading: _isLoading,
            counter: _counter,
            child: MyCenterWidget(),
          ),
          ...
        );
      }
      ...
    }
    class CounterWidget extends StatelessWidget {
      @override
      Widget build(BuildContext context) {
        final myInheritedWidget = MyInheritedWidget.of(context); // NEW
        
        if (myInheritedWidget == null) {
          return Text('MyInheritedWidget was not found');
        }
        
        return myInheritedWidget.isLoading
            ? CircularProgressIndicator()
            : Text('${myInheritedWidget.counter}');
      }
    }
    ...
    ```
    1. `super(child)` í˜¸ì¶œ
        - `InheritedWidget` ìƒì„±ìëŠ” ë°˜ë“œì‹œ `child`ë¥¼ í•„ìš”ë¡œ í•©ë‹ˆë‹¤.
        - ìì‹ í´ë˜ìŠ¤ `MyInheritedWidget`ì€ ìƒì„±ìì—ì„œ `child`ë¥¼ ë°›ì•„ `super(child: child)`ë¡œ ë¶€ëª¨ ìƒì„±ìì— ì „ë‹¬í•©ë‹ˆë‹¤.
    2. `child`ì˜ ì—­í• 
        - ìœ„ì ¯ íŠ¸ë¦¬ì—ì„œ í•˜ìœ„ ìœ„ì ¯ íŠ¸ë¦¬ë¥¼ êµ¬ì„±í•˜ë©°, ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì—¬ê¸°ê¹Œì§€ í•˜ë©´ ì•ì„œ ì–¸ê¸‰í•œ ë‘ ê°€ì§€ ë¬¸ì œ ì¤‘, ë˜‘ê°™ì€ ìƒì„±ìë¥¼ ì—¬ëŸ¬ ë²ˆ ì‘ì„±í•´ì•¼ ë˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
- í•˜ì§€ë§Œ ì—¬ì „íˆ `CounterWidget`ê³¼ `MyCenterWidget`ì˜ build í•¨ìˆ˜ ì•ˆì— printë¬¸ì„ ë„£ì–´ ë³´ë©´ ë²„íŠ¼ì´ í´ë¦­ë  ë•Œë§ˆë‹¤ printë¬¸ì´ ì°íˆëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

# How to avoid unnecessary re-builds
- ë²„íŠ¼ì„ í´ë¦­í•  ë•Œë§ˆë‹¤ `MyHomePage`ì˜ `build` í•¨ìˆ˜ ì•ˆì— ìˆëŠ” `setState` í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤.    
- ì´ì— ë”°ë¼ `CounterWidget`ê³¼ `MyCenterWidget`ì´ ì“¸ë°ì—†ì´ ë‹¤ì‹œ ì´ˆê¸°í™”ëœë‹¤(reinitialized).    
- í•´ê²° ë°©ë²•    
    1. `MyHomePage` í´ë˜ìŠ¤ ì•ˆì— `Widget` íƒ€ì…ì„ ë°›ëŠ” `child` ì†ì„±ì„ ë§Œë“¤ì–´ì¤€ ë’¤, í•´ë‹¹ ì†ì„±ìœ¼ë¡œ `MyCenterWidget`ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ ì¤€ë‹¤.        
        ```dart
        void main() {
          runApp(
            MaterialApp(
              home: MyHomePage(
                isLoading: false,
                counter: 0,
                **child: MyCenterWidget(), // NEW**
              ),
            ),
          );
        }
        class MyHomePage extends StatefulWidget {
          final bool isLoading;
          final int counter;
          **final Widget child;  // NEW**
          
          const MyHomePage({
            required this.isLoading,
            required this.counter,
            **required this.child,  // NEW**
          });
        ...
        }
        ```
    2. `MyCenterWidget`ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ `child` ì†ì„±ì— ë„˜ê²¨ì¤¬ê¸° ë•Œë¬¸ì— ë” ì´ìƒ ì¶”ê°€ì ì¸ `MyCenterWidget` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ í•„ìš” ì—†ì´ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ `widget` ë³€ìˆ˜ë¡œ `MyHomePage`ë¡œ ë„˜ê²¨ì£¼ë©´ ëœë‹¤.

        ```dart
        class MyHomePageState extends State<MyHomePage> {
        ...
          @override
          Widget build(BuildContext context) {
            return Scaffold(
              body: MyInheritedWidget(
                isLoading: _isLoading,
                counter: _counter,
                **child: widget.child,          // NEW**
              ),
              ...
            );
          }
        ...
        }
        ```
- ì—¬ê¸°ê¹Œì§€ ì§„í–‰í•˜ë©´ `CounterWidget`ê³¼ `MyCenterWidget`ì˜ build í•¨ìˆ˜ê°€ ê³„ì† í˜¸ì¶œë˜ì§„ ì•Šì§€ë§Œ, UIê°€ ë°”ë€Œì§€ ì•ŠëŠ” ì‹¬ê°í•œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

# updateShouldNotify method
- `updateShouldNotify`Â í•¨ìˆ˜ëŠ” `InheritedWidget`ì´ ë‹¤ì‹œ ë¹Œë“œëœ(rebuilt) ì§í›„ì— í˜¸ì¶œëœë‹¤.
- ë§Œì•½ `updateShouldNotify`ê°€ `true`ë¥¼ ë°˜í™˜í•˜ë©´, `InheritedWidget`ì´ ë‹¤ì‹œ ë¹Œë“œëœ ì´í›„ í•´ë‹¹ ìœ„ì ¯ì— ì˜ì¡´í•˜ëŠ” ìì‹ ìœ„ì ¯ë“¤ì´ ê°•ì œë¡œ ë‹¤ì‹œ ë¹Œë“œëœë‹¤.
    - í•œ ê°€ì§€ ê°•ì¡°í•  ë¶€ë¶„ì€ `updateShouldNotify`ëŠ” ì˜¤ì§ `InheritedWidget`ì„ **ì§ì ‘ ì°¸ì¡°**í•˜ëŠ” ìœ„ì ¯(`MyInheritedWidget.of(context)`)ì—ë§Œ ì˜í–¥ì„ ì¤€ë‹¤ëŠ” ì ì´ë‹¤.
    - í˜„ì¬ ì½”ë“œì—ì„œ `MyInheritedWidget`ì„ ì§ì ‘ ì°¸ì¡°í•˜ëŠ” ìœ„ì ¯ì€ `CounterWidget`ë§Œ í•´ë‹¹ëœë‹¤.
- ë°˜ëŒ€ë¡œ, `updateShouldNotify`ê°€ `false`ë¥¼ ë°˜í™˜í•˜ë©´, ì–´ë– í•œ ìì‹ ìœ„ì ¯ë„ ë‹¤ì‹œ ë¹Œë“œë˜ì§€ ì•ŠëŠ”ë‹¤.
- ì—¬ê¸°ì„œ â€˜ì˜ì¡´í•œë‹¤â€™ëŠ” ê²ƒì€, `MyInheritedWidget.of(context)` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” `MyInheritedWidget`ì˜ ìì‹ ìœ„ì ¯ë“¤ì´ ë¶€ëª¨ ìœ„ì ¯ì¸ `MyInheritedWidget`ì— 'ì˜ì¡´í•œë‹¤'ê³  í•  ìˆ˜ ìˆë‹¤.
- ì¦‰ í˜„ì¬ `updateShouldNotify`ê°€ `false`ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ìì‹ ìœ„ì ¯ì¸ `CounterWidget`ì´ `build` í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•˜ì§€ ëª»í•˜ê³  ìˆëŠ” ìƒí™©ì´ì—ˆë˜ ê²ƒì´ë‹¤.
- ë”°ë¼ì„œ `updateShouldNotify`ê°€ `true`ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ë˜, ë°ì´í„°ë¥¼ ì²´í¬í•´ì„œ build í•¨ìˆ˜ í˜¸ì¶œì´ í•„ìš”í•  ë•Œë§Œ `true`ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•´ ì¤€ë‹¤.
    ```dart
    @override
    bool updateShouldNotify(MyInheritedWidget oldWidget) {
       return isLoading != oldWidget.isLoading || counter != oldWidget.counter;
    }
    ```

# Comparison and Conclusion
```dart
import 'package:flutter/material.dart';

void main() {
  runApp(
    MaterialApp(
      home: MyHomePage(isLoading: false, counter: 0),
    ),
  );
}

class MyHomePage extends StatefulWidget {
  final bool isLoading;
  final int counter;

  const MyHomePage({
    required this.isLoading,
    required this.counter,
  });

  @override
  State<MyHomePage> createState() {
    return MyHomePageState();
  }
}

class MyHomePageState extends State<MyHomePage> {
  late bool _isLoading;
  late int _counter;

  @override
  void initState() {
    super.initState();
    _isLoading = widget.isLoading;
    _counter = widget.counter;
  }

  @override
  Widget build(BuildContext context) {
    print('rebuild MyHomePage');
    return Scaffold(
      body: MyInheritedWidget(
        isLoading: _isLoading,
        counter: _counter,
        child: MyCenterWidget(),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: onFloatingButtonClicked,
      ),
    );
  }

  void onFloatingButtonClicked() {
    print('Button clicked!. Call setState method');
    setState(() {
      _counter++;
      if (_counter % 2 == 0) {
        _isLoading = false;
      } else {
        _isLoading = true;
      }
    });
  }
}

class CounterWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    print('rebuild CounterWidget');
    final myInheritedWidget = MyInheritedWidget.of(context);

    if (myInheritedWidget == null) {
      return Text('MyInheritedWidget was not found');
    }

    return myInheritedWidget.isLoading
        ? CircularProgressIndicator()
        : Text('${myInheritedWidget.counter}');
  }
}

class MyCenterWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    print('rebuild MyCenterWidget');
    return Center(
      child: CounterWidget(),
    );
  }
}

class MyInheritedWidget extends InheritedWidget {
  final int counter;
  final bool isLoading;
  final Widget child;

  MyInheritedWidget({
    required this.isLoading,
    required this.counter,
    required this.child,
  }) : super(child: child);

  @override
  bool updateShouldNotify(MyInheritedWidget oldWidget) {
    return false;
  }

  static MyInheritedWidget? of(BuildContext context) {
    return context.dependOnInheritedWidgetOfExactType<MyInheritedWidget>();
  }
}

```
```dart
import 'package:flutter/material.dart';

void main() {
  runApp(
    MaterialApp(
      home: MyHomePage(
        isLoading: false,
        counter: 0,
        **child: MyCenterWidget(), // NEW**
      ),
    ),
  );
}

class MyHomePage extends StatefulWidget {
  final bool isLoading;
  final int counter;
  **final Widget child; // NEW**

  const MyHomePage({
    required this.isLoading,
    required this.counter,
    **required this.child, // NEW**
  });

  @override
  State<MyHomePage> createState() {
    return MyHomePageState();
  }
}

class MyHomePageState extends State<MyHomePage> {
  late bool _isLoading;
  late int _counter;

  @override
  void initState() {
    super.initState();
    _isLoading = widget.isLoading;
    _counter = widget.counter;
  }

  @override
  Widget build(BuildContext context) {
    print('rebuild MyHomePage');
    return Scaffold(
      body: MyInheritedWidget(
        isLoading: _isLoading,
        counter: _counter,
        **child: widget.child, // CHANGED**
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: onFloatingButtonClicked,
      ),
    );
  }

  void onFloatingButtonClicked() {
    print('Button clicked!. Call setState method');
    setState(() {
      _counter++;
      if (_counter % 2 == 0) {
        _isLoading = false;
      } else {
        _isLoading = true;
      }
    });
  }
}

class CounterWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    print('rebuild CounterWidget');
    final myInheritedWidget = MyInheritedWidget.of(context);

    if (myInheritedWidget == null) {
      return Text('MyInheritedWidget was not found');
    }

    return myInheritedWidget.isLoading
        ? CircularProgressIndicator()
        : Text('${myInheritedWidget.counter}');
  }
}

class MyCenterWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    print('rebuild MyCenterWidget');
    return Center(
      child: CounterWidget(),
    );
  }
}

class MyInheritedWidget extends InheritedWidget {
  final int counter;
  final bool isLoading;
  final Widget child;

  MyInheritedWidget({
    required this.isLoading,
    required this.counter,
    required this.child,
  }) : super(child: child);

  @override
  bool updateShouldNotify(MyInheritedWidget oldWidget) {
    **return isLoading != oldWidget.isLoading || counter != oldWidget.counter; // CHANGED**
  }

  static MyInheritedWidget? of(BuildContext context) {
    return context.dependOnInheritedWidgetOfExactType<MyInheritedWidget>();
  }
}

```
- ê° ì½”ë“œì˜ ì¶œë ¥ ì°¨ì´
    ```dart
    rebuild MyHomePage
    rebuild MyCenterWidget
    rebuild CounterWidget
    Button clicked!. Call setState method
    rebuild MyHomePage
    rebuild MyCenterWidget
    rebuild CounterWidget
    Button clicked!. Call setState method
    rebuild MyHomePage
    rebuild MyCenterWidget
    rebuild CounterWidget
    ```
    ```dart
    rebuild MyHomePage
    rebuild MyCenterWidget
    rebuild CounterWidget
    Button clicked!. Call setState method
    rebuild MyHomePage
    rebuild CounterWidget
    Button clicked!. Call setState method
    rebuild MyHomePage
    rebuild CounterWidget
    ```
- ì²« ë²ˆì§¸ ì½”ë“œì™€ ë‘ ë²ˆì§¸ ì½”ë“œ ëª¨ë‘ ìœ„ì ¯ ê³„ì¸µ êµ¬ì¡°ëŠ” ë™ì¼í•˜ë‹¤.
    - ì²« ë²ˆì§¸ ì½”ë“œëŠ” `MyHomePage`ì—ì„œ `setState`ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ `Scaffold`ì˜ `body` ì „ì²´ê°€ ë‹¤ì‹œ ë¹Œë“œë˜ë©´ì„œ `MyCenterWidget`ê³¼ `CounterWidget`ë„ ë‹¤ì‹œ ë¹Œë“œë˜ëŠ” êµ¬ì¡°ì´ë‹¤.
    - ë‘ ë²ˆì§¸ ì½”ë“œì—ì„œëŠ” `MyInheritedWidget`ì˜ `updateShouldNotify`ê°€ ìƒíƒœ ë³€í™”(`_counter`, `_isLoading`)ì— ë”°ë¼ `true`ë¥¼ ë°˜í™˜í•œë‹¤.
    - `MyInheritedWidget`ì´ ë³€ê²½ë˜ë©´ FlutterëŠ” `context.dependOnInheritedWidgetOfExactType`ì„ í†µí•´ í•´ë‹¹ ìœ„ì ¯, ì¦‰ `InheritedWidget`ì„ ìƒì†ë°›ì€ í´ë˜ìŠ¤ë§Œ ì—…ë°ì´íŠ¸í•œë‹¤.
    - `CounterWidget`ì€ `MyInheritedWidget`ì— ì˜ì¡´í•˜ë¯€ë¡œ ìƒíƒœ ë³€í™” ì‹œ ë‹¤ì‹œ ë¹Œë“œëœë‹¤.
- `InheritedWidget`ì€ ìƒíƒœ ê´€ë¦¬ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ, ë” ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ ì ‘ê·¼ë²•ì´ ê¶ê¸ˆí•˜ë‹¤ë©´ â€˜[Provider](https://pub.dev/packages/provider)â€™ and â€˜[Bloc](https://pub.dev/packages/flutter_bloc)â€™ê³¼ ê°™ì€ ë°©ë²•ì„ ì°¾ì•„ë³´ì.    
    - `Provider`ëŠ” `InheritedWidget`ì˜ í™•ì¥ëœ í˜•íƒœë¡œ, ìƒíƒœ ê´€ë¦¬ ë° ì˜ì¡´ì„± ì£¼ì…ì„ ë” ì‰½ê²Œ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.
    - ë”°ë¼ì„œ `InheritedWidget`ì„ ì´í•´í•˜ë©´ `Provider`ì˜ ë™ì‘ ë°©ì‹ì„ ë” ì‰½ê²Œ ìµí ìˆ˜ ìˆë‹¤.