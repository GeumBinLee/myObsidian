> [!Info]- ì¶œì²˜ ë§í¬
> [ğŸ”— Flutter Zero to Hero.Part 2 ğŸ”—](https://medium.com/@NALSengineering/flutter-from-zero-to-hero-part-2-statefulwidget-vs-statelesswidget-15d195125d75)

# StatelessWidget, State, and the â€˜buildâ€™ method
- ì•ì„œ ë°°ì› ë“¯ ìœ„ì ¯ì€ Dartì˜ í´ë˜ìŠ¤ë‹¤.
- ë§ì€ ìœ„ì ¯ì´ `StatelessWidget`ì´ë‚˜ `StatefulWidget`ì„ ìƒì† ë°›ì•„ ë§Œë“¤ì–´ì§„ë‹¤.
- í”ŒëŸ¬í„°(Flutter)ì—ì„œ `StatelessWidget`ê³¼ `StatefulWidget` ëª¨ë‘ **`build` ë©”ì„œë“œë¥¼ ë°˜ë“œì‹œ ì˜¤ë²„ë¼ì´ë”©í•´ì•¼ í•œë‹¤.**
```dart
import 'package:flutter/material.dart';

void main() {
  runApp(
    const MaterialApp(
      home: Scaffold(
        body: Center(
          child: CounterWidget(isLoading: true, counter: 7),
        ),
      ),
    ),
  );
}

class CounterWidget extends StatelessWidget {
  final bool isLoading;
  final int counter;

  // ìƒì„±ì(Constructor)
  const CounterWidget({
    required this.isLoading,
    required this.counter,
  });

  // Flutterì—ì„œ build ë©”ì„œë“œëŠ” ì‹¤ì œë¡œ í™”ë©´ì— ê·¸ë ¤ì§ˆ ìœ„ì ¯ íŠ¸ë¦¬ë¥¼ êµ¬ì„±í•˜ëŠ” ì—­í• 
  // build ë©”ì„œë“œëŠ” ë°˜ë“œì‹œ Flutterì˜ Widgetì„ ë°˜í™˜í•´ì•¼ í•˜ë©°,
  // ì´ ìœ„ì ¯ì€ ì´í›„ì— Flutterì˜ ë Œë”ë§ ì—”ì§„ì— ì˜í•´ í™”ë©´ì— í‘œì‹œëœë‹¤.
  @override
  Widget build(BuildContext context) {
    return isLoading ? const CircularProgressIndicator() : Text('$counter');
  }
}
```
![[UI = build(state).png|center|400]]
- ìœ„ ì˜ˆì œ ì½”ë“œì—ì„œ StateëŠ” build ë©”ì„œë“œë¡œ ë“¤ì–´ê°€ëŠ” ë°ì´í„°ì¼ ë¿ì´ë‹¤.
- **$UI = build(state)$** : build ë©”ì„œë“œëŠ” stateë¥¼ ë°›ì•„ì„œ ê·¸ì— ë”°ë¥¸ UIë¥¼ ë±‰ì–´ë‚¸ë‹¤ëŠ” ì ì—ì„œ ìˆ˜í•™ì—ì„œì˜ í•¨ìˆ˜ì™€ ë¹„ìŠ·í•˜ë‹¤.
- **build ë©”ì„œë“œëŠ” `StatelessWidget` ê°ì²´ë¥¼ ì´ˆê¸°í™”(initialize)í•  ë•Œ í˜¸ì¶œëœë‹¤.**

# StatefulWidget
- `StatefulWidget`ì„ ìƒì† ë°›ì€ ìœ„ì ¯ì„ êµ¬í˜„í•  ë•Œ, ë°˜ë“œì‹œ `crateState` í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•´ì•¼ í•œë‹¤.
- ê·¸ë¦¬ê³  í•´ë‹¹ ìœ„ì ¯ì„ ì œë„¤ë¦­ìœ¼ë¡œ ë°›ëŠ” `State<T>` í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” ìƒíƒœ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.    
    ```dart
    class MyHomePage **extends StatefulWidget** {
      **@override**
      **State<MyHomePage> createState()** {
        // ...
      }
    }
    
    class MyHomePageState **extends State<MyHomePage>** {
      @override
      Widget build(BuildContext context) {
        // ...
      }
    }
    ```
- **`MyHomePage` ê°ì²´ëŠ” ìƒì„± ì‹œ `createState()`ë¥¼ í˜¸ì¶œí•´ `MyHomePageState` ê°ì²´ë¥¼ ë§Œë“ ë‹¤.**
- **ê·¸ë¦¬ê³  `MyHomePageState`ì€ ì´ˆê¸°í™”ë  ë•Œ `build` í•¨ìˆ˜ë¥¼ í˜¸ì¶œëœë‹¤.**
- ì´ì²˜ëŸ¼ **ì»¤ìŠ¤í…€ `StatefulWidget`ì„ ë§Œë“¤ ë•ŒëŠ” `StatefulWidget`ì„ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ì™€ `State`ë¥¼ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ ë‘ í´ë˜ìŠ¤ë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ êµ¬í˜„**í•´ì•¼ í•œë‹¤.
- ì½”ë“œ íë¦„ (The flow of code)
	![[StatelessWidgetê³¼ StatefulWidgetì˜ ì½”ë“œ íë¦„.png|center|400]]
- `widget.state`
    ```dart
    class MyHomePage extends StatefulWidget {
      final bool isLoading;
      final int counter;  
      const MyHomePage({
        required this.isLoading,
        required this.counter,
      });  
      @override
      State<MyHomePage> createState() {
        return MyHomePageState();
      }
    }
    
    class MyHomePageState extends State<MyHomePage> {
      @override
      Widget build(BuildContext context) {
        return Scaffold(
          body: Center(
            child: CounterWidget(
              isLoading: **widget.isLoading**,
              counter: **widget.counter**,
            ),
          ),
        );
      }
    }
    ```
    - `State` í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì€ í´ë˜ìŠ¤ëŠ” `widget`ì´ë¼ëŠ” ë³€ìˆ˜ë¥¼ ê°€ì§„ë‹¤.
    - ìœ„ ì˜ˆì œ ì½”ë“œì—ì„œ `widget`ì€ `MyHomePage` í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì´ë‹¤.
    - ë”°ë¼ì„œ `widget`ì„ í†µí•´ `MyHomePage`ì˜ propertyì¸ `isLoading`ê³¼ `counter`ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
- `StatelessWidget`ê³¼ `StatefulWidget`ì˜ ê³µí†µì ê³¼ ì°¨ì´ì 
    - ê³µí†µì  : ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ë  ë•Œ(ì´ˆê¸°í™”ë  ë•Œ â†’ initialized) `build` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
    - ì°¨ì´ì 
        1. `StatefulWidget`ì€ ìƒˆë¡œìš´ ê°ì²´ ìƒì„± ë•Œ ë¿ë§Œ ì•„ë‹ˆë¼, `setState` ë©”ì„œë“œë¥¼ í†µí•´ì„œ ìƒˆë¡œìš´ ê°ì²´ ìƒì„± ì—†ì´ë„ `build` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ UIë¥¼ ê·¸ë¦´ ìˆ˜ ìˆë‹¤.
        2. `StatelessWidget`ì™€ ë‹¬ë¦¬ `StatefulWidget`ì€ í´ë˜ìŠ¤ ê°ì²´ ìƒì„± í›„, `build` í•¨ìˆ˜ ì‹¤í–‰ ì „ì— í˜¸ì¶œë˜ëŠ” `initState` í•¨ìˆ˜ë¥¼ í†µí•´ ì´ˆê¹ƒê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

# setState method
- `State` í´ë˜ìŠ¤ ë‚´ ë©”ì„œë“œì´ë‹¤.
- **`setState` ë©”ì„œë“œë¥¼ í†µí•´ `build` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.**
- ê°’(value)ëŠ” ìƒíƒœ(state)ë¥¼ í˜¸ì¶œí•˜ê³ , ê·¸ì— ë”°ë¥¸ UIê°€ ë§Œë“¤ì–´ì§„ë‹¤. â†’ **$UI = build(state)$**
- ì¦‰ **UIë¥¼ ë°”ê¾¸ê¸° ìœ„í•´ì„œëŠ” ìƒíƒœë¥¼ ë°”ê¿”ì•¼ í•œë‹¤.**
- **ë•Œë¬¸ì— ìƒíƒœëŠ” `final` í‚¤ì›Œë“œ ëŒ€ì‹  `State` í´ë˜ìŠ¤ ì•ˆì—ì„œ ê°€ë³€ì  ë³€ìˆ˜ë¡œ ì„ ì–¸ë˜ì–´ì•¼ í•œë‹¤.**
- `initState` : í´ë˜ìŠ¤ ê°ì²´ ìƒì„± í›„, build í•¨ìˆ˜ ì‹¤í–‰ ì „ì— í˜¸ì¶œí•´ ì´ˆê¹ƒê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
	```dart
	class MyHomePageState extends State<MyHomePage> {
	  late bool _isLoading;
	  late int _counter;
	@override
	  void initState() {
	    super.initState();
	    _isLoading = widget.isLoading;
	    _counter = widget.counter;
	  }**
	  // ...
	  child: CounterWidget(
	   isLoading: _isLoading,
	   counter: _counter,
	  ),
	  // ...
    ```
	- ìœ„ ì½”ë“œì—ì„  `MyHomePage`ì— ì „ë‹¬ëœ ê°’(value)ë“¤ì„ ê°€ì ¸ì™€ì„œ `_isLoading`ê³¼ `_counter` ë³€ìˆ˜ì— ì´ˆê¹ƒê°’ì„ í• ë‹¹í•˜ê¸° ìœ„í•´ `initState` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆë‹¤.
	![[StatefulWidgetì˜ ê¸°ë³¸ ìƒì• ì£¼ê¸°.png|center|400]]

# StatelessWidget vs. StatefulWidget
- ê³µí†µì 
    1. `build` í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
    2. ê³µì‹(formula) : **$UI = build(state)$**
    3. ì´ˆê¸°í™”í•  ë•Œ(initialization) `build` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
- ì°¨ì´ì 

| `StatelessWidget`                                 | `StatefulWidget`                                                                   |
| ------------------------------------------------- | ---------------------------------------------------------------------------------- |
| `State` í´ë˜ìŠ¤, `initState` ë©”ì„œë“œ, `setState` ë©”ì„œë“œê°€ ì—†ë‹¤. | `State` í´ë˜ìŠ¤, `initState` ë©”ì„œë“œ, `setState` ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤.                              |
| `build` í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ ì´ìƒ í˜¸ì¶œí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.           | `State` ê°ì²´ê°€ `setState` ë©”ì„œë“œë¡œ `build` í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ ì´ìƒ ì‹¤í–‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì‚¬ìš©ìì™€ì˜ ìƒí˜¸ì‘ìš© ì‹œ ë³€í•  ìˆ˜ ìˆë‹¤. |

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(
    MaterialApp(
      home: MyHomePage(isLoading: false, counter: 0),
    ),
  );
}

class MyHomePage extends StatefulWidget {
  final bool isLoading;
  final int counter;

  const MyHomePage({
    required this.isLoading,
    required this.counter,
  });

  @override
  State<MyHomePage> createState() {
    return MyHomePageState();
  }
}

class MyHomePageState extends State<MyHomePage> {
  late bool _isLoading;
  late int _counter;

  @override
  void initState() {
    super.initState();
    _isLoading = widget.isLoading;
    _counter = widget.counter;
  }

  @override
  Widget build(BuildContext context) {
    print('rebuild MyHomePage');
    return Scaffold(
      body: Center(
        child: CounterWidget(
          isLoading: _isLoading,
          counter: _counter,
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: onFloatingButtonClicked,
      ),
    );
  }

  void onFloatingButtonClicked() {
    print('Button clicked!. Call setState method');
    setState(() {
      _counter++;
      if (_counter % 2 == 0) {
        _isLoading = false;
      } else {
        _isLoading = true;
      }
    });
  }
}

/* CounterWidgetì€ ìƒíƒœê°€ ë³€í•˜ì§€ ì•ŠëŠ” StatelessWidgetì´ë‹¤. í•˜ì§€ë§Œ MyHomePageState
   í´ë˜ìŠ¤ì˜ build ë©”ì„œë“œ ë‚´ë¶€ì— CounterWidgetì´ ì¡´ì¬í•´ setStateê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤
   ê¸°ì¡´ì˜ CounterWidget ê°ì²´ê°€ ìƒˆë¡œìš´ ì†ì„±ê°’ì„ ë°›ëŠ” ìƒˆë¡œìš´ ê°ì²´ë¡œ êµì²´ëœë‹¤.
   ì¦‰ MyHomePageStateì—ì„œ setStateë¡œ build í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ UIê°€ ë°”ë€ë‹¤. */
class CounterWidget extends StatelessWidget {
  final bool isLoading;
  final int counter;

  const CounterWidget({
    required this.isLoading,
    required this.counter,
  });

  @override
  Widget build(BuildContext context) {
    return isLoading ? CircularProgressIndicator() : Text('$counter');
  }
}
```

# Which to use?
- `build` í•¨ìˆ˜ë¥¼ ì¬ì‹¤í–‰í•  í•„ìš”ê°€ ìˆëŠ”ê°€ ì—†ëŠ”ê°€ë¡œ êµ¬ë¶„í•œë‹¤.
- ì¦‰ ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš© ì‹œ ìƒíƒœì— ë”°ë¼ UIê°€ ë°”ë€Œì–´ì•¼ í•œë‹¤ë©´ `StatefulWidget`ìœ¼ë¡œ êµ¬í˜„í•´ì•¼ í•œë‹¤.
- UIê°€ ë°”ë€” í•„ìš”ê°€ ì—†ë‹¤ë©´ `StatelessWidget`ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²Œ í¼í¬ë¨¼ìŠ¤ ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•˜ë‹¤.
- ì£¼ì˜ì : ìƒíƒœ ë³€í™”ì— ë”°ë¥¸ UI ë³€í™”ê°€ ì—†ì„ ë•ŒëŠ” StatelessWidgetìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²Œ ì¢‹ë‹¤. í¬ì¸íŠ¸ëŠ” â€˜UIì— ë³€í™”ê°€ ìˆëƒ ì—†ëƒâ€™ì´ë‹¤.
- ì˜ˆì‹œ: ì²´í¬ë°•ìŠ¤ë„ ìœ ì €ì˜ í´ë¦­ì— ë”°ë¼ ìƒíƒœê°€ ë°”ë€Œê³ , ê·¸ì— ë”°ë¼ UIê°€ ë°”ë€Œë¯€ë¡œ StatefulWidgetìœ¼ë¡œ êµ¬í˜„í•´ì•¼ í•œë‹¤.