> [!Info]- ì¶œì²˜ ë§í¬
> [ğŸ”— Flutter Zero to Hero.Part 8 ğŸ”—](https://medium.com/@NALSengineering/flutter-from-zero-to-hero-part-8-widget-lifecycle-in-action-8dcb9abf3dcf)

> [!Question] í•™ìŠµ ëª©í‘œ
> `StatelessWidget`ê³¼ `StatefulWidget`ì˜ **ìƒëª… ì£¼ê¸°(lifecycle)ì™€ ìš©ë¡€(use cases)**ë¥¼ ì•Œì•„ë³´ì!

- StatelessWidgetì˜ ìƒëª… ì£¼ê¸°ëŠ” ìƒì„±ì(constructor)ë¡œ ì‹œì‘í•œë‹¤. ì´ ìƒì„±ìëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆìœ¼ë©°, ë°˜ë“œì‹œ build ë©”ì„œë“œë¥¼ ì¬ì •ì˜(override)í•´ì•¼ í•œë‹¤.
	![[StatelessWidgetì˜ ìƒëª… ì£¼ê¸°.png|center|400]]
- `StatelessWidget`ì˜ `build` ë©”ì„œë“œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì€ ë‘ ê°€ì§€ ìƒí™©ì—ì„œ í˜¸ì¶œëœë‹¤.    
    1. ìœ„ì ¯ì´ ìƒì„±ìë¡œ ì¸í•´ ë§Œë“¤ì–´ì¡Œì„[ìƒì„±ë˜ì—ˆì„] ë•Œ ([code example](https://dartpad.dev/?id=f2c30d4e1a390df9ef0ba7c075cd3e64))
        - ìœ„ì ¯ì´ íŠ¸ë¦¬ì— ì¶”ê°€ë˜ê±°ë‚˜ ìƒˆë¡œìš´ `StatelessWidget` ê°ì²´ê°€ ìƒì„±ë  ë•Œ
        e.g. ì´ˆê¸° í™”ë©´ ë¡œë“œ ì‹œ ìœ„ì ¯ì´ ìƒì„±ë˜ëŠ” ê²½ìš°        
    2. í•´ë‹¹ ìœ„ì ¯ì´ ì˜ì¡´í•˜ëŠ” [`InheritedWidget`](https://medium.com/@NALSengineering/flutter-from-zero-to-hero-part-4-exploring-inheritedwidget-6161ddcb8c0a)ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ([code example](https://dartpad.dev/?id=e135cca903e4f8709b5ee074a9e25f56))
        - ë” ì •í™•íˆëŠ” ìœ„ì ¯ì´ InheritedWidgetì„ ì°¸ì¡°í•˜ê³  ìˆê³ , InheritedWidgetì˜ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë˜ì–´ `updateShouldNotify`ê°€ `true`ë¥¼ ë°˜í™˜í•˜ëŠ” ê²½ìš°
        - ì´ë•Œ í•´ë‹¹ InheritedWidgetì„ ì˜ì¡´í•˜ëŠ” ëª¨ë“  ìì‹ ìœ„ì ¯ì˜ `build` ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤.
        e.g. `InheritedWidget`ì—ì„œ ì œê³µí•˜ëŠ” ë°ì´í„°ê°€ ë³€ê²½ë˜ì–´ í•´ë‹¹ ìœ„ì ¯ì˜ rebuildê°€ í•„ìš”í•œ ê²½ìš°
- 2ë²ˆ ì˜ˆì œ ì½”ë“œë¥¼ ê¸°ì¤€ìœ¼ë¡œ, ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ
    

# StatefulWidget lifecycle

| **êµ¬ë¶„**                 | **StatelessWidget**                    | **StatefulWidget**                    |
| ---------------------- | -------------------------------------- | ------------------------------------- |
| **1. ìƒì„± ì‹œ**            | ìœ„ì ¯ì´ íŠ¸ë¦¬ì— ì¶”ê°€ë  ë•Œ                          | ìœ„ì ¯ì´ íŠ¸ë¦¬ì— ì¶”ê°€ë  ë•Œ                         |
| **2. ìƒíƒœ ë³€í™”**           | ì—†ìŒ                                     | `setState`ê°€ í˜¸ì¶œë  ë•Œ                     |
| **3. InheritedWidget** | ìœ„ì ¯ì´ ì˜ì¡´í•˜ëŠ” InheritedWidgetì´ ë³€ê²½ë  ë•Œ        | ìœ„ì ¯ì´ ì˜ì¡´í•˜ëŠ” InheritedWidgetì´ ë³€ê²½ë  ë•Œ       |
| **4. ë¶€ëª¨ ìœ„ì ¯ ë³€í™”**        | ë¶€ëª¨ ìœ„ì ¯ì´ ë‹¤ì‹œ ë¹Œë“œë˜ë©´ í•´ë‹¹ StatelessWidgetë„ ë¹Œë“œë¨ | ë¶€ëª¨ ìœ„ì ¯ì´ ë‹¤ì‹œ ë¹Œë“œë˜ë©´ í•´ë‹¹ StatefulWidgetë„ ë¹Œë“œë¨ |
| **5. ì¬ë°°ì¹˜**             | ì—†ìŒ                                     | StatefulWidgetì´ ë‹¤ë¥¸ ë¶€ëª¨ë¡œ ì´ë™í•˜ë©´ ë‹¤ì‹œ ë¹Œë“œë¨    |

- **StatefulWidgetì—ì„œ `build` ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ëŠ” ê²½ìš°**
    1. ìœ„ì ¯ì´ ìƒì„±ë  ë•Œ
        - StatefulWidgetì´ ì²˜ìŒ íŠ¸ë¦¬ì— ì¶”ê°€ë˜ê±°ë‚˜ ìƒì„±ë  ë•Œ.
    2. `setState`ê°€ í˜¸ì¶œë  ë•Œ
        - `setState`ëŠ” ìƒíƒœ ë³€í™”ë¥¼ Flutterì— ì•Œë¦¬ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.
        - í˜¸ì¶œ ì‹œ ìœ„ì ¯ì˜ `build` ë©”ì„œë“œê°€ ì¬ì‹¤í–‰ë˜ì–´ UIê°€ ê°±ì‹ ë©ë‹ˆë‹¤.
    3. ìœ„ì ¯ì´ ì˜ì¡´í•˜ëŠ” InheritedWidgetì´ ë³€ê²½ë  ë•Œ
        - StatelessWidgetê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, StatefulWidgetì´ InheritedWidgetì„ ì°¸ì¡°í•˜ê³  ìˆê³ , í•´ë‹¹ InheritedWidgetì´ ë³€ê²½ë˜ë©´ `build` ë©”ì„œë“œê°€ í˜¸ì¶œë©ë‹ˆë‹¤.
    4. ë¶€ëª¨ ìœ„ì ¯ì´ `build`ë¥¼ í˜¸ì¶œí•  ë•Œ
        - ë¶€ëª¨ ìœ„ì ¯ì´ ë‹¤ì‹œ ë¹Œë“œë˜ë©´, ìì‹ ìœ„ì ¯ì˜ `build` ë©”ì„œë“œë„ í˜¸ì¶œë©ë‹ˆë‹¤.
    5. ìœ„ì ¯ íŠ¸ë¦¬ì—ì„œ ì¬ë°°ì¹˜(reparenting)ê°€ ë°œìƒí•  ë•Œ
        - ë™ì¼í•œ StatefulWidgetì´ ë‹¤ë¥¸ ë¶€ëª¨ë¡œ ì´ë™í•˜ë©´ ìƒˆë¡œìš´ `Element`ë¥¼ ìƒì„±í•˜ë©°, `build`ê°€ ë‹¤ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤.
- StatelessWidgetê³¼ ìœ ì‚¬í•˜ê²Œ, StatefulWidgetì˜ ìƒëª… ì£¼ê¸°ëŠ” ìƒì„±ìì™€ ë°˜ë“œì‹œ override[ì¬ì •ì˜]í•´ì•¼í•˜ëŠ” createState ë©”ì„œë“œë¡œ ì‹œì‘ëœë‹¤.
	![[StatefulWidgetì˜ createState().png|center|150]]
- createState ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œ State ê°ì²´ê°€ ìƒì„±ë˜ê³ ,í•´ë‹¹ ê°ì²´ì˜ ìƒëª… ì£¼ê¸°ëŠ” ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ë‹¤.
	![[StatefulWidgetì˜ createState ë©”ì„œë“œì˜ ìƒëª… ì£¼ê¸°.png]]
	- `build` ë©”ì„œë“œì™€ `setState` ë©”ì„œë“œëŠ” [[2. StatefulWidget vs. StatelessWidget]]ì—ì„œ ë‹¤ë¤˜ìœ¼ë¯€ë¡œ ì•„ë˜ì—ì„œëŠ” ê·¸ ì™¸ì˜ í•¨ìˆ˜ë“¤ì„ ë‹¤ë£¬ë‹¤.

# mounted property
- `createState` ë©”ì„œë“œê°€ í˜¸ì¶œë¨ìœ¼ë¡œì¨ State ê°ì²´ë¥¼ ìƒì„±í•œ í›„ì— `initState`ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì—, í”„ë ˆì„ì›Œí¬ëŠ” **State ê°ì²´ë¥¼ [BuildContext](https://medium.com/@NALSengineering/flutter-from-zero-to-hero-part-3-understand-buildcontext-in-4-minutes-472af1df8e02)ì™€ ì—°ê²°í•˜ê¸° ìœ„í•´ `mounted`ë¼ëŠ” Boolean ì†ì„±ì„ `true`ë¡œ ì„¤ì •**í•œë‹¤.
- **mounted = true**ëŠ” **ì´ State ê°ì²´ê°€ í˜„ì¬ ìœ„ì ¯ íŠ¸ë¦¬ì— í¬í•¨ë˜ì–´[ì¡´ì¬í•˜ê³ ] ìˆìŒì„ ì˜ë¯¸**í•œë‹¤.
- **`dispose` ë©”ì„œë“œê°€ í˜¸ì¶œëœ í›„**ì—ëŠ” State ê°ì²´ê°€ ë”ì´ìƒ ìœ„ì ¯ íŠ¸ë¦¬ ìƒì— ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ **`mounted` ì†ì„±ì€ `false`**ê°€ ëœë‹¤.
- `mounted` ì†ì„±ì´ `true`ê°€ ì•„ë‹ ë•Œ `setState`ë¥¼ í˜¸ì¶œí•˜ëŠ” ê±´ ì—ëŸ¬ë‹¤.
- ë”°ë¼ì„œ **í•­ìƒ `setState` í˜¸ì¶œ ì „ì— mountedë¥¼ í™•ì¸í•´ì•¼ í•œë‹¤**.
- ê·¸ë˜ì„œ `setState` ë©”ì„œë“œë¥¼ êµ¬í˜„(implement)í•  ë•Œë„ ì•„ë˜ì™€ ê°™ì´ `mounted` ì¡°ê±´ë¬¸ìœ¼ë¡œ ê°ì‹¸ì£¼ëŠ” ê²ƒì´ ë² ìŠ¤íŠ¸ë‹¤.
    ```dart
    if (mounted) {
      setState(() {
        // do something
      });
    }
    ```

# initState method
- ê°ì²´ê°€ ìœ„ì ¯ íŠ¸ë¦¬ì— ì‚½ì…ë (inserted) ë•Œ, ì¦‰ `mounted` ì†ì„±ì´ `true`ë¡œ ì„¤ì •ë  ë•Œ, `initState` ë©”ì„œë“œê°€ ìƒì„±ì ì´í›„ì— ìë™ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤(executed).
- `initState` ë©”ì„œë“œëŠ” **state ê°ì²´ê°€ ì²˜ìŒìœ¼ë¡œ ìƒì„±ë  ë•Œ ë”± í•œ ë²ˆ í˜¸ì¶œ**ëœë‹¤.
- ì´ ë©”ì„œë“œëŠ” **í´ë˜ìŠ¤ ìƒì„±ì ì´í›„ì— ë‹¨ í•œ ë²ˆë§Œ í˜¸ì¶œ**ë˜ë©°, **State ê°ì²´ê°€ ì²˜ìŒ ìƒì„±ë  ë•Œë§Œ ì‹¤í–‰**ëœë‹¤.
- ì£¼ì˜ì‚¬í•­: **`BuildContext`ë¥¼ ì´ ë©”ì„œë“œ ë‚´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.**
    - ì˜ˆë¥¼ ë“¤ì–´, `context.dependOnInheritedWidgetOfExactType()`ì™€ ê°™ì€ ì½”ë“œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
- ì‚¬ìš© ì˜ˆì œ
    1. ìœ„ì ¯ íŠ¸ë¦¬ ìƒì˜ ë¶€ëª¨ ìœ„ì ¯ì— ì˜ì¡´í•˜ëŠ” ì†ì„±ë“¤ì„ ì´ˆê¸°í™”í•œë‹¤.        
        ```dart
        class MyHomePageState extends State<MyHomePage> {
          late bool _isLoading;
          late int _counter;
          
          @override
          void initState() {
            super.initState();
            _isLoading = widget.isLoading;
            _counter = widget.counter;
          }
        ```
    2. HTTP ìš”ì²­(requests)ì„ í˜¸ì¶œí•œë‹¤. â†’ ë§¨ ì²˜ìŒ í™”ë©´ ë¡œë“œí•  ë•Œ ë°ì´í„° ê¸ì–´ì˜¤ëŠ” ê±° ë§í•˜ëŠ” ë“¯?
        ```dart
        late Future<Album> futureAlbum;
        @override
        void initState() {
          super.initState();
          futureAlbum = fetchAlbum();
        }
        Future<Album> fetchAlbum() async {
          final response = await http.get(Uri.parse('<https://jsonplaceholder.typicode.com/albums/1>'));
          if (response.statusCode == 200) {
            return Album.fromJson(jsonDecode(response.body));
          } else {
            throw Exception('Failed to load album');
          }
        }
        ```
    3. Stream, ChangeNotifier, ê·¸ë¦¬ê³  Listenerì™€ ê°™ì´ ìœ„ì ¯ì—ì„œ ë°ì´í„°ë¥¼ ë°”ê¿€ ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ê°ì²´ë“¤ì„ êµ¬ë…í•  ë•Œ ì‚¬ìš©í•œë‹¤.
        - ë‚œ ì´ êµ¬ë…ì´ë¼ëŠ” ì–´íœ˜ê°€ ì§ì—­í•˜ë©´ ë˜ê²Œ ì´ìƒí•œ ê±° ê°™ìŒ.
        - ì­‰ ë´¤ì„ ë•Œ í•´ë‹¹ ê°ì²´ë“¤ì˜ **ë³€ê²½ ì‚¬í•­ì„ ì¶”ì **í•  ìˆ˜ ìˆë‹¨ ì˜ë¯¸ì¸ ê±° ê°™ìŒ.
        - ì°¾ì•„ë³´ë‹ˆ **Flutterì—ì„œ êµ¬ë…ì´ë€ í•´ë‹¹ ê°ì²´ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì•Œë¦¼ì„ ë°›ê³ , ê·¸ì— ë”°ë¼ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ UIë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒ**ì„ ì˜ë¯¸í•œë‹¤ê³  í•¨.
        - ì˜ˆë¥¼ ë“¤ì–´ Streamì„ êµ¬ë…í•˜ë©´ Streamì— ìƒˆë¡œìš´ ë°ì´í„°ê°€ í˜ëŸ¬ ë“¤ì–´ì˜¤ëŠ” ê±¸ ê°ì§€í•˜ê³  ë°˜ì‘í•  ìˆ˜ ìˆë‹¤.        
        ```dart
        late StreamSubscription streamSubscription;
        final scrollController = ScrollController();
        @override
        void initState() {
          super.initState();
          // Subscribe to streams (Stream êµ¬ë…)
          streamSubscription = exceptionStream.listen((exception) => print(exception));  
          // Add listeners (Listener ì¶”ê°€)
          scrollController.addListener(listener);
        }
        ```

# didChangeDependencies method
- `didChangeDependencies` ë©”ì„œë“œëŠ” ë³´í†µ ì•„ë˜ ë‘ ìƒí™©ì—ì„œ í˜¸ì¶œëœë‹¤.
    1. `initState` ë©”ì„œë“œ ë°”ë¡œ ë’¤ì— í˜¸ì¶œëœë‹¤.
    2. í•´ë‹¹ ìœ„ì ¯ì´ ì˜ì¡´í•˜ëŠ” [`InheritedWidget`](https://medium.com/@NALSengineering/flutter-from-zero-to-hero-part-4-exploring-inheritedwidget-6161ddcb8c0a)ì´ ë³€ê²½ë  ë•Œ í˜¸ì¶œëœë‹¤.
```dart
class _CounterWidgetState extends State<CounterWidget> {
  @override
  void initState() {
    super.initState();
    print('CounterWidget\\'s initState method is called');
  }

  @override
  void didChangeDependencies() {
    super.didChangeDependencies();
    print('CounterWidget\\'s didChangeDependencies method is called');
  }

  // ...
}
```
[Full source code example](https://dartpad.dev/?id=7e2cbc5101b3e8bbb7c3f21f4f13741f)
- ìœ„ ì½”ë“œì˜ full codeë¥¼ ì‹¤í–‰í•´ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥ëœë‹¤. `initState` ë©”ì„œë“œ ë°”ë¡œ ë’¤ì— í˜¸ì¶œë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
    ```
    CounterWidgetâ€™s **constructor is called**
    CounterWidgetâ€™s **initState method is called**
    CounterWidgetâ€™s **didChangeDependencies method is called**
    CounterWidgetâ€™s **build method is called**
    ```
- `setState`ê°€ í˜¸ì¶œë˜ëŠ” ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥ëœë‹¤. í•´ë‹¹ ìœ„ì ¯ì´ ì˜ì¡´í•˜ëŠ” `InheritedWidget`ì´ ë³€ê²½ë  ë•Œ í˜¸ì¶œë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
    ```
    Button clicked!. **Call setState method**
    CounterWidgetâ€™s **didChangeDependencies method is called**
    CounterWidgetâ€™s build method is called
    ```
- Use Case
    - ì´ ë©”ì„œë“œëŠ” `BuildContext`ë¥¼ ì²˜ìŒ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¡œ, ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì— ì í•©í•˜ë‹¤.
        1. `context.inheritFromWidgetOfExactType`
        2. `Provider.of(context)`
        3. `MediaQuery.of(context)`
        4. `Theme.of(context)`
    - `InheritedWidget` ë³€ê²½ ì‹œ ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œ ë“± ë¦¬ì†ŒìŠ¤ ì§‘ì•½ì ì¸ ì‘ì—… ìˆ˜í–‰
    - InheritedWidgetì´ ì—…ë°ì´íŠ¸ë  ë•Œ ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œê³¼ ê°™ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì¡ì•„ë¨¹ëŠ”(expensive) ë™ì‘ì„ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.
# dirty property
- `setState` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ í”„ë ˆì„ì›Œí¬ëŠ” ìœ„ì ¯ì„ `dirty` ìƒíƒœë¡œ í‘œì‹œí•œë‹¤(marks).
- State ê°ì²´ê°€ê°€ dirtyí•  ë•Œë§ˆë‹¤, ì¦‰ `dirty = true`ì¼ë•Œë§ˆë‹¤, State ê°ì²´ëŠ” ë³€ë™ì‚¬í•­ì„ ë°˜ì˜í•˜ê¸° ìœ„í•´ `build` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ UIë¥¼ ê°±ì‹ í•œë‹¤.

# didUpdateWidget method
- `didUpdateWidget` ë©”ì„œë“œëŠ” ì£¼ë¡œ ë¶€ëª¨ StatefulWidgetì´ `setState` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ë°œìƒí•œë‹¤.
    - í˜¸ì¶œ ì‹œì : ë¶€ëª¨ ìœ„ì ¯ì´ ë™ì¼í•œ `runtimeType`ê³¼ `Key`ë¥¼ ê°€ì§„ ìƒˆë¡œìš´ ìœ„ì ¯ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆì„ ë•Œ
        - Elementê°€ `deactivated` ìƒíƒœê°€ ëœ ë’¤ corresponding keyë¥¼ ì°¾ì•„ ì¬ì‚¬ìš©ë˜ëŠ” ê²½ìš°ì—ë„, `didUpdateWidget` ë©”ì„œë“œëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
        - `didUpdateWidget`ì€ ì˜¤ì§ ë¶€ëª¨ ìœ„ì ¯ì´ ë™ì¼í•œ `runtimeType`ê³¼ [Key](https://medium.com/@NALSengineering/flutter-from-zero-to-hero-part-6-understand-keys-say-bye-to-ui-bugs-faac4f52a2b)ë¥¼ ê°€ì§„ ìƒˆë¡œìš´ ìœ„ì ¯ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë  ë•Œ í˜¸ì¶œëœë‹¤.
    - ë™ì‘: í”„ë ˆì„ì›Œí¬ëŠ” `State` ê°ì²´ì˜ `widget` ì†ì„±(property)ì„ ìƒˆë¡œìš´ ìœ„ì ¯ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³ , ì´ì „ ìœ„ì ¯ì„ ì¸ìˆ˜ë¡œ ë°›ì•„(refer to) ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
    - **ì£¼ì˜**: ì´ë¯¸ `build`ê°€ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì— ì´ ë©”ì„œë“œ ë‚´ì—ì„œ í˜¸ì¶œëœ `setState`ëŠ” ë¬´ì˜ë¯¸í•˜ë‹¤.
- ì‚¬ìš© ì˜ˆì œ : ìœ„ì ¯ì˜ ë³€í™”ì— ë°˜ì‘í•˜ë„ë¡ `didUpdateWidget` ë©”ì„œë“œë¥¼ overrideí•œë‹¤.
    1. animation controllerì˜ ì§€ì† ì‹œê°„(duration)ì„ ì—…ë°ì´íŠ¸ í•œë‹¤.
        ```java
        @override
        void didUpdateWidget(covariant AnimatedBox oldWidget) {
          super.didUpdateWidget(oldWidget);
          if (oldWidget.durationInSeconds != widget.durationInSeconds) {
            _controller.duration = Duration(seconds: widget.durationInSeconds);
            _controller.repeat(reverse: true);
          }
        }
        ```
        ![[didUpdateWidgnet ë©”ì„œë“œë¥¼ í™œìš©í•œ ì• ë‹ˆë©”ì´ì…˜.gif]]
    2. tream êµ¬ë…ì„ ìƒˆ ê°ì²´ë¡œ ì „í™˜ â‡’ ì´ì „ ê°ì²´ë¥¼ êµ¬ë… í•´ì œí•˜ê³ , ìƒˆ ê°ì²´ êµ¬ë…
        - ì—…ë°ì´íŠ¸ ëœ ìœ„ì ¯ì˜ ì„¤ì •(configuration)ì´ ê°ì²´ë¥¼ êµì²´í•˜ê¸¸ ìš”êµ¬í•  ë•Œ, ì´ì „(old) ê°ì²´ë¥¼ Unsubscribeí•˜ê³  ìƒˆë¡œìš´ ìœ„ì ¯ì„ êµ¬ë…(subscribe)í•œë‹¤.
        ```dart
        StreamSubscription<int>? subscription;
        @override
        void didUpdateWidget(covariant Tile oldWidget) {
          super.didUpdateWidget(oldWidget);  
          if (widget.stream != oldWidget.stream) {
            subscription?.cancel(); // Unsubscribe from the old object
            subscription = widget.stream.listen( // subscribe to the new one
              (event) {
                print(event);
              },
            );
          }
        }
        
        // ì´ ì½”ë“œì—ì„œ didUpdateWidgetë¥¼ ì£¼ì„ ì²˜ë¦¬í•˜ë©´ ì½˜ì†”ì— ìˆ«ìê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.
        ```
        ![[Using the didUpdateWidget method.gif]]
		![[Not using the didUpdateWidget method.gif]]
- Chat GPT (ë³µìŠµí•  ë•Œ ì½ì–´ë³´ê¸°)
    - `didUpdateWidget` ë©”ì„œë“œëŠ” Flutterì—ì„œ ìœ„ì ¯ì˜ ìƒëª…ì£¼ê¸°ì— ì†í•œ ë©”ì„œë“œì´ë‹¤.
    - Flutter ì•±ì—ì„œëŠ” ìœ„ì ¯ì´ ìƒíƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ”ë°, ì´ëŸ¬í•œ ìœ„ì ¯ë“¤ì€ `StatefulWidget`ì´ë¼ê³  í•œë‹¤.
    - ê° `StatefulWidget`ì€ ìƒì‘í•˜ëŠ” `State` ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
    - `State` ê°ì²´ëŠ” ìœ„ì ¯ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , ìœ„ì ¯ íŠ¸ë¦¬ì—ì„œ í•´ë‹¹ ìœ„ì ¯ì˜ ìœ„ì¹˜ì™€ ìƒëª…ì£¼ê¸°ë¥¼ ë‹´ë‹¹í•œë‹¤.
    - `didUpdateWidget` ë©”ì„œë“œì˜ ì—­í• 
        1. **ìœ„ì ¯ ì—…ë°ì´íŠ¸ ë°˜ì‘** : `didUpdateWidget`ì€ ë¶€ëª¨ ìœ„ì ¯ì´ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¡œ ì—…ë°ì´íŠ¸ë˜ì–´ í˜„ì¬ì˜ `State` ê°ì²´ì— ì—°ê²°ëœ ìœ„ì ¯ì´ ë³€ê²½ë  ë•Œ í˜¸ì¶œëœë‹¤. ì´ ë©”ì„œë“œëŠ” ìƒˆë¡œìš´ ìœ„ì ¯ê³¼ ì´ì „ ìœ„ì ¯ì„ ë¹„êµí•˜ì—¬ í•„ìš”í•œ ìƒíƒœ ì—…ë°ì´íŠ¸ë‚˜ ë¦¬ì†ŒìŠ¤ í•´ì œ ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µí•œë‹¤.
        2. **ë¶ˆí•„ìš”í•œ `setState` í˜¸ì¶œ ë°©ì§€** : `didUpdateWidget`ì´ í˜¸ì¶œëœ í›„ì—ëŠ” Flutter í”„ë ˆì„ì›Œí¬ê°€ `build` ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤. ë”°ë¼ì„œ `didUpdateWidget` ë‚´ë¶€ì—ì„œ ìƒíƒœ ë³€ê²½ì„ ìœ„í•´ `setState`ë¥¼ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ë‹¤. ì´ë¯¸ `build` ë©”ì„œë“œê°€ í˜¸ì¶œë  ì˜ˆì •ì´ê¸° ë•Œë¬¸ì´ë‹¤.
    - ì‚¬ìš© ì‚¬ë¡€:
        - ìƒìœ„ ìœ„ì ¯ì—ì„œ ì „ë‹¬í•œ ë°ì´í„°ê°€ ë³€ê²½ë  ë•Œ, ì´ ë³€ê²½ì„ ê°ì§€í•˜ê³  ê·¸ì— ë”°ë¥¸ íŠ¹ì • ë¡œì§(ë°ì´í„° ì²˜ë¦¬, ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ ë“±)ì„ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ `didUpdateWidget`ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
        - ì˜ˆë¥¼ ë“¤ì–´, ìœ„ì ¯ì´ í‘œì‹œí•˜ëŠ” ë°ì´í„°ê°€ ë°”ë€Œì—ˆëŠ”ì§€ í™•ì¸í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ íƒ€ì´ë¨¸ë¥¼ ì¬ì„¤ì •í•˜ê±°ë‚˜ ì• ë‹ˆë©”ì´ì…˜ì„ ë‹¤ì‹œ ì‹œì‘í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ í•  ìˆ˜ ìˆë‹¤.
    - ìš”ì•½ : `didUpdateWidget`ì€ ìœ„ì ¯ì˜ ë³€ê²½ì— ë°˜ì‘í•˜ì—¬ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, ì´ ë©”ì„œë“œê°€ í˜¸ì¶œëœ í›„ì—ëŠ” ìƒíƒœ ë³€ê²½ì„ ìœ„í•´ `setState`ë¥¼ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ë‹¤.

# deactivate method
- `deactivate` ë©”ì„œë“œëŠ” í”„ë ˆì„ì›Œí¬ê°€ State ê°ì²´ë¥¼ íŠ¸ë¦¬ì—ì„œ ì œê±°í•  ë•Œë§ˆë‹¤ í˜¸ì¶œëœë‹¤.
- **ì¬ì‚¬ìš© ê°€ëŠ¥ì„±**: ì´ ë©”ì„œë“œ í˜¸ì¶œ í›„, ê²½ìš°ì— ë”°ë¼ `State` ê°ì²´ê°€ íŠ¸ë¦¬ì˜ ë‹¤ë¥¸ ìœ„ì¹˜ì— ë‹¤ì‹œ ì‚½ì…ë  ìˆ˜ ìˆë‹¤.
    - ê°€ë ¹ [`GlobalKey`](https://medium.com/@NALSengineering/flutter-from-zero-to-hero-part-7-the-power-of-globalkey-6abf818225a0)ë¥¼ ì‚¬ìš©í•´ State ê°ì²´ë¥¼ í¬í•¨í•˜ëŠ” subtreeê°€ íŠ¸ë¦¬ì˜ í•œ ìœ„ì¹˜ì—ì„œ ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ì˜®ê²¨ì§ˆ(grafted) ë•Œë¥¼ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆë‹¤.
- ì°¸ê³  ì½”ë“œ : [Full source code example](https://dartpad.dev/?id=cb20f7d2f0118c46ad45df11f4a20f22)
    - ìœ„ ì°¸ê³  ì½”ë“œì—ì„œ ë²„íŠ¼ í´ë¦­ ì‹œ `deactivate`ë§Œ í˜¸ì¶œë˜ê³ , `dispose`ëŠ” í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.

# dispose method
- ì´ ë©”ì„œë“œëŠ” **State ê°ì²´ê°€ ìœ„ì ¯ íŠ¸ë¦¬ì—ì„œ ì˜êµ¬ì ìœ¼ë¡œ ì—†ì–´ì§ˆ ë•Œ í˜¸ì¶œ**ëœë‹¤.
    - **í˜¸ì¶œ ì‹œì **: ì˜ˆë¥¼ ë“¤ì–´, í™”ë©´ì´ ìŠ¤íƒì—ì„œ ì œê±°ë  ë•Œ (the screen is popped off the stack)
- **ì£¼ì˜ ì‚¬í•­**: ì´ ë©”ì„œë“œëŠ” **ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ê³  ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë°˜ë“œì‹œ êµ¬í˜„**í•´ì•¼ í•œë‹¤.    
- ì°¸ê³  ì½”ë“œ : [Full source code example](https://dartpad.dev/?id=ab986d63aa9de299cc9db251f5b271e5)
    ```java
    The widget with the key [GlobalKey#19b93] was deactivated
    The widget with the key [GlobalKey#85c33] was deactivated
    The widget with the key [GlobalKey#19b93] was disposed
    The widget with the key [GlobalKey#85c33] was disposed
    ```
    - ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œ í™”ë©´ì´ ìŠ¤íƒì—ì„œ ì œê±°ë˜ê³ , `deactivate`ì™€ `dispose` ë©”ì„œë“œê°€ ëª¨ë‘ í˜¸ì¶œëœë‹¤.
- ìš©ë¡€ : **ê°ì²´ì—ì„œ ë³´ìœ í•œ(retained) ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ í•´ì œ(release)**í•˜ê¸° ìœ„í•´ **`dispose` ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©[ì¬ì •ì˜]** í•´ì•¼ í•œë‹¤.
    - e.g. í™œì„±í™”ëœ ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì§€, íƒ€ì´ë¨¸ ì·¨ì†Œ, ìŠ¤íŠ¸ë¦¼ êµ¬ë… ì·¨ì†Œ, ë¦¬ìŠ¤ë„ˆ ì œê±°    
    ```java
    late StreamSubscription streamSubscription;
    final scrollController = ScrollController();
    final textEditingController = TextEditingController();
    final streamController = StreamController();
    final timer = Timer(const Duration(milliseconds: 500), callback);
    final animationController = AnimationController(vsync: this);
    @override
    void dispose() {
      super.dispose();
      
      // Unsubscribe from streams
      streamSubscription.cancel();  
      // cancel timers
      timer.cancel();  
      // remove listeners
      scrollController.removeListener(listener);  
      // dispose controllers
      textEditingController.dispose();
      animationController.dispose();  
      // close StreamControllers
      streamController.close();
    }
    ```
- ë§Œì•½ Stateì˜ `build` ë©”ì„œë“œê°€ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ê°ì²´(ì˜ˆ: `ChangeNotifier`, `Stream`, ë˜ëŠ” ë‹¤ë¥¸ ì•Œë¦¼ì„ ë°›ê¸° ìœ„í•´ êµ¬ë…í•  ìˆ˜ ìˆëŠ” ê°ì²´)ì— ì˜ì¡´í•˜ëŠ” ê²½ìš°, ë‹¤ìŒê³¼ ê°™ì´ êµ¬ë…ê³¼ í•´ì œë¥¼ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•´ì•¼ í•œë‹¤.    
    1. **`initState`ì—ì„œ ê°ì²´ë¥¼ êµ¬ë…**
        - ê°ì²´ì˜ ìƒíƒœ ë³€í™”ë¥¼ ê°ì§€í•˜ê¸° ìœ„í•´ êµ¬ë… ì„¤ì •.
    2. **`didUpdateWidget`ì—ì„œ ì´ì „ ê°ì²´ êµ¬ë… í•´ì œ ë° ìƒˆ ê°ì²´ë¡œ êµ¬ë… ì „í™˜**
        - ìœ„ì ¯ì´ ì—…ë°ì´íŠ¸ë  ë•Œ ì´ì „ ê°ì²´ì™€ ìƒˆ ê°ì²´ë¥¼ ë¹„êµí•˜ê³ , _**í•„ìš”í•˜ë©´**_ ìƒˆ ê°ì²´ë¡œ ì „í™˜.
    3. **`dispose`ì—ì„œ ê°ì²´ êµ¬ë… í•´ì œ**
        - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë°˜ë“œì‹œ ëª¨ë“  êµ¬ë…ì„ í•´ì œí•˜ê³ , ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•´ì•¼ í•œë‹¤.
- ì°¸ê³  ì½”ë“œ : [*Stream example](https://dartpad.dev/?id=dd592cc01df44e1ea31476bc39e5c1d8)Â orÂ [animation code example](https://dartpad.dev/?id=a0de832566603e87929c9c8521d316ed)*

# Conclusion
- ìœ„ì ¯ì˜ ìƒëª… ì£¼ê¸°ë¥¼ ì´í•´í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ í˜¼ë€ìŠ¤ëŸ¬ìš´ ì˜¤ë¥˜ë¥¼ í”¼í•  ìˆ˜ ìˆë‹¤.
    - ì™œ UIê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠëŠ”ì§€
    - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜
    - ë¹„ì •ìƒì ì¸ ë™ì‘